# Demo版本实施计划

- [x] 1. 项目初始化和基础结构





  - 创建项目根目录和client/server子目录结构
  - 初始化前端React项目，配置基本的开发环境
  - 初始化后端Express项目，配置SQLite数据库
  - 创建根目录package.json，配置并发启动脚本
  - 测试基本的前后端通信连接
  - _需求: 1.1, 1.3_

- [x] 2. SQLite数据库设置和基础API





  - 安装sqlite3依赖，创建数据库连接模块
  - 创建books、reading_progress、excerpts数据表
  - 实现基础的数据库操作函数(CRUD)
  - 创建数据库初始化脚本和种子数据
  - 编写数据库连接测试
  - _需求: 5.1, 5.2, 5.3, 5.4_

- [x] 3. 文件上传和书籍管理API





  - 配置Multer中间件处理epub文件上传
  - 实现POST /api/upload端点，处理文件保存和元数据提取
  - 实现GET /api/books端点，返回书籍列表
  - 实现GET /api/books/:id/file端点，提供epub文件下载
  - 创建uploads目录和文件管理逻辑
  - _需求: 2.1, 2.2, 5.2_

- [ ] 4. 阅读进度管理API
  - 实现GET /api/progress/:bookId端点，获取阅读进度
  - 实现POST /api/progress/:bookId端点，保存阅读进度
  - 添加进度数据验证和错误处理
  - 实现进度的自动更新时间戳
  - 编写进度管理相关测试
  - _需求: 3.1, 3.2, 3.3_

- [ ] 5. 摘录管理API
  - 实现GET /api/excerpts/:bookId端点，获取书籍摘录列表
  - 实现POST /api/excerpts端点，创建新摘录
  - 添加摘录数据验证和CFI范围处理
  - 实现摘录的基本CRUD操作
  - 编写摘录管理相关测试
  - _需求: 4.1, 4.2, 4.3, 4.4_

- [ ] 6. 服务器配置和局域网访问
  - 配置Express服务器支持CORS和静态文件服务
  - 设置服务器监听0.0.0.0，支持局域网访问
  - 添加请求日志和基本错误处理中间件
  - 实现服务器启动时显示本地和网络访问地址
  - 测试局域网设备访问功能
  - _需求: 1.1, 1.2, 1.4_

- [ ] 7. 前端基础架构和路由
  - 创建React应用的基本组件结构
  - 实现简单的客户端路由(书籍列表/阅读器视图)
  - 创建API服务模块，封装HTTP请求逻辑
  - 实现基础的状态管理(使用React hooks)
  - 添加基本的CSS样式和响应式布局
  - _需求: 1.4, 2.3_

- [ ] 8. 文件上传组件实现
  - 创建BookUpload组件，支持拖拽和点击上传
  - 实现上传进度显示和错误处理
  - 添加文件类型验证(仅允许.epub文件)
  - 实现上传成功后的自动跳转到阅读器
  - 添加上传状态的用户反馈
  - _需求: 2.1, 2.2_

- [ ] 9. 书籍列表组件
  - 创建BookList组件，显示已上传的书籍
  - 实现书籍卡片显示(标题、作者、上传时间)
  - 添加书籍点击打开阅读器功能
  - 实现简单的书籍搜索和筛选
  - 显示每本书的阅读进度信息
  - _需求: 2.3, 3.4_

- [x] 10. epub.js阅读器集成
  - 安装epub.js库，创建EpubViewer组件
  - 实现epub文件加载和基本渲染功能
  - 创建阅读器导航控件(上一页、下一页、目录)
  - 实现基本的阅读设置(字体大小、主题切换)
  - 添加阅读进度条和章节导航
  - _需求: 2.2, 2.3_

- [ ] 11. 阅读进度自动保存功能
  - 监听epub.js的relocated事件，自动保存阅读位置
  - 实现本地localStorage缓存和服务器同步
  - 添加页面刷新后的进度恢复功能
  - 实现跨设备进度同步(通过API)
  - 添加离线模式下的本地进度保存
  - _需求: 3.1, 3.2, 3.3, 3.4_

- [ ] 12. 文本摘录功能实现
  - 集成epub.js的文本选择事件处理
  - 创建摘录创建对话框组件
  - 实现选中文本的CFI范围获取和保存
  - 添加摘录的实时保存到服务器
  - 实现摘录在阅读器中的高亮显示
  - _需求: 4.1, 4.2_

- [ ] 13. 摘录管理界面
  - 创建ExcerptList组件，显示所有摘录
  - 实现摘录卡片显示(内容、来源书籍、创建时间)
  - 添加从摘录跳转到书籍对应位置的功能
  - 实现摘录的基本编辑和删除功能
  - 添加按书籍筛选摘录的功能
  - _需求: 4.3, 4.4_

- [ ] 14. 响应式设计和移动端适配
  - 实现基本的响应式CSS布局
  - 优化移动端的阅读器界面和控件
  - 添加触摸手势支持(滑动翻页)
  - 测试不同屏幕尺寸的显示效果
  - 优化移动端的文本选择和摘录创建体验
  - _需求: 1.4_

- [ ] 15. 错误处理和用户体验优化
  - 实现全局错误处理和用户友好的错误提示
  - 添加加载状态指示器和进度反馈
  - 实现网络错误的重试机制
  - 添加操作成功的提示信息
  - 优化页面加载性能和用户交互响应
  - _需求: 2.4, 3.4_

- [ ] 16. 功能测试和验证
  - 测试epub文件上传和解析功能
  - 验证阅读器的基本功能和导航
  - 测试跨设备的进度同步功能
  - 验证摘录创建和管理功能
  - 测试局域网设备访问和响应式设计
  - _需求: 所有需求的验证_

- [ ] 17. 部署脚本和文档
  - 创建一键启动脚本和开发环境配置说明
  - 编写基本的使用文档和功能说明
  - 添加常见问题解决方案
  - 创建demo数据和示例epub文件
  - 配置生产环境构建脚本
  - _需求: 1.1, 1.3_